local gatesTable = {

    --------------------------------------------------------------------

    ------------------- ADD HERE AS MUCH GATES YOU WANT! ---------------

    -- EXAMPLE: {ObjectgateID, closedX, closedY, closedZ, closedRoationX, closedRoationY, closedRoationZ, openX, openY, openZ, openSpeed, colSize, groupName, Team

    -- NOTE: If the base is for a group only just add nil on the place where the team should be

    --------------------------------------------------------------------
    -------------------------------------------------- LAW GROUPS -------------------------------------------------

    --Advanced Assault Forces
    {2929, 215.86816, 1875.67871, 13.9,0,0,0, 220, 1875.67871, 13.9,400,12,"Advanced Assault Forces"},
    {2927, 211.89999, 1875.67896, 13.85,0,0,0,207.7, 1875.67871, 13.85,400,12,"Advanced Assault Forces"},
	{5422,268.69, 1864.28, 8.72,0,0,90,268.69, 1864.28, 3.0,400,12,"Advanced Assault Forces"},
    {980,295.31, 1885.69, 0,0,0,90,295.31, 1885.69, 6.0,400,12,"Advanced Assault Forces"},
    {980, 96.95, 2071.72, 19.2,0,0,90,96.95, 2071.72, 10,400,12,"Advanced Assault Forces"},
    {971, 340, 1794.5999755859, 20.799999237061,0,0,36,336.70001220703, 1792.5, 20.799999237061,400,12,"Advanced Assault Forces"},
    {971, 347.10000610352, 1799.7600097656, 20.799999237061,0,0,36,352.89999389648, 1803.5, 20.799999237061,400,12,"Advanced Assault Forces"},

    --Joseph's Office
    {971, -1335, 487.29998779297, 13.60000038147,0,0,0,-1335, 487.29998779297, 5,400,4,"Advanced Assault Forces"},
	
    --SWAT
    --{3115, -425.900390625,1446.099609375,33.299999237061,0,90,205, -425.900390625,1446.099609375,20.299999237061,400,8.0,"SWAT Team"},
    --{980,-389.09960937,1742.7998046875,44,0,356,63,-389.09960937,1742.7998046875,35.33044,400,8.0,"SWAT Team"},
    --{980,-393,1244,7.9000000953674,0,0,357,-393,1244,-2.9000000953674,400,8.0,"SWAT Team"},
    --{980,-319.799804687,1811.5,45.200000762939,0,90,12,-319.799804687,1811.5,35.200000762939,400,8.0,"SWAT Team"},

    --GIGN
	--{980,1949.7, -84.9, 37.1,0,0,178.97943115234,1949.7, -84.9, 30,400,12,"GIGN"},
	--{980, -3.3, 219.1, 9.7, 0, 0, 150, -3.3, 219.1, 4.5, 400, 12,"GIGN"},
	--{980, 33.1, 189.1, 2.2, 0, 0, 150, 33.1, 189.1, -3, 400, 12,"GIGN"},
	--{3113, 135.35, 368.4, 0, 0, 15.3, 60, 135.5, 368.4, -14, 400, 12,"GIGN"},
	
	

	--DOD
    --{985,288, 1414.55, 11.1,0,0,90,288, 1422, 11.1,400,12,"Advanced Assault Forces"},
    --{986,288, 1406.5996, 11.1,0,0,90,288, 1398, 11.1,400,12,"SWAT Team"},
	
	--SSG
	--{980,3077.36, -1036.77, 16.35,0,0,90,3077.36, -1036.77,8,400,12,"SSG"}, -- Main Gate
	--ObjectgateID, closedX, closedY, closedZ, closedRoationX, closedRoationY, closedRoationZ, openX, openY, openZ, openSpeed, colSize, groupName, Team
	--Position: , ,  Interior: 0, Dimension: 0 Rotation: 89.351654052734
	--{980, -301.15, 1492, 77, 0, 0, 183, -301.15, 1492, 40, 400, 12, "SSG"}, -- Main Gate
	--{980, -301.15, 1492, 77, 0, 0, 183, 2830.74, -58.73, 30, 400, 12, "SSG"}, -- Main Gate
	--{988,3114.50, -994, 1.05,0,0,360,3114.50, -994,8,400,12,"SSG"},   --Sea Gate
	--{2927,3140.14, -1063.42, 15.48,0,0,270,3140.14, -1063.42,8,400,12,"SSG"}, --Inside
	
	--SPF
	--{980,-36.299999237061, 423.70001220703, 4.1999998092651,0,0,180,-36.299999237061, 423.70001220703, -1.3999999761581,400,12,"Special PoliceForce"},
	--{980,166.69999694824, 372.29998779297, 4.1999998092651,0,90,0,166.69999694824, 372.29998779297, -4.4000000953674,400,12,"Special PoliceForce"},
    --{3115,304.79998779297, 414.20001220703, -2.0999999046326,0,90,180.25,304.79998779297, 414.20001220703, -11.39999961853,400,12,"Special PoliceForce"},
	--{980, 925.20, 3073.13, 56.10,0,0,0, 924.72, 3071.13, 8,400,12,"Special PoliceForce"},

	--CAgency
	--{3115,1048.24, -1613.37, 9.56,270,0,90,1048.24, -1630.37, 9.56,400,12,"Government Agency"},
	--{986,1139.32, -1615, 12.63,0,0,270,1139.32, -1609.26, 12.63,400,12,"Government Agency"},
	--{986,1139.42, -1623.33, 12.63,0,0,90,1139.42, -1633.33, 12.63,400,12,"Government Agency"},
	--{980,1808.63, -833.83, 102.33,0,0,270,1808.63, -833.83, 93.33,400,12,"Government Agency"},
    --{3113,  350.60000610352 , 163.60000610352 , 5.5, 0,15 ,310,350.60000610352 , 163.60000610352 , -10,400,12,"Government Agency"},
    --{2957,  312.60000610352 , 216.75 , 19.5, 90,90 ,40,312.60000610352 , 210.75 , 19.5,400,12,"Government Agency"},
    --{980,  233.58 , 228.1 , 2.00, 0,0 ,40,233.58 , 228.1 , -6.00,400,12,"Government Agency"},

	--LAWFarm
	{980,1092.9000244141, -310.79998779297, 75.900001525879,0,0,270,1092.9000244141, -310.79998779297, 70,400,12,"LAW","LAW"},
	{980,1030.5, -367.79998779297, 75.699996948242,0,0,0,1030.5, -367.79998779297, 69,400,12,"LAW","LAW"},
	
	
	--Delta Force
	--{980,1953.54, -790.4, 143.20,0,0,108,1953.94, -790.4, 7,400,12,"Delta Force"},

        --SAT
        --{3113,  350.60000610352 , 163.60000610352 , 5.5, 0,15 ,310,350.60000610352 , 163.60000610352 , -10,400,12,"Special Assault Team"},
        --{2957,  312.60000610352 , 216.75 , 19.5, 90,90 , 40, 0, 1, 0,400,12,"Special Assault Team"},
        --{980,  233.58 , 228.1 , 2.00, 0,0 ,40,233.58 , 228.1 , -6.00,400,12,"Special Assault Team"},

	---------------------------------------------------------------------------------------------------------------
    ----------------------------------------------- CRIMINAL GROUPS ------------------------------------------------
	
	-- Bloods
	
	--{980, 2167.00, 607.45, 16.20,0,0,360,2166.00, 607.45,8,400,12,"Bloods"},
	--{980,2231.05, 495.63, 3.00,0,0,360,2231.05, 495.63,8,400,12,"Bloods"},

	--The Terrorists

	{980,2569.31, 592.48, 14.4,0,0,360,2569.31, 592.48, 7,500,12,"The Terrorists"},
	{8378, 2571.01, 471.45, 12.98,0,0,0, 2571.01, 471.45, 2, 500,12,"The Terrorists"},
	
	--Dream Chacers
	--{3115, 1922.95, 614.88, 11.04,0,90,90, 1922.95, 614.88, 2, 400,12,"DreamChacers"},
	--{3115, 1922.95, 614.88, 14.04 , 1922.95, 614.88, 14.04 , 614.98, 12 400, 12,"Çukur"},
	
	--Cobras
	{980, 997.5, 1406.05, 12.6,0,0,270, 997.5, 1406.05, 12.6+5.5, 300,12,"The Cobras"},
	--{3115, 1922.95, 614.88, 14.04 , 1922.95, 614.88, 14.04 , 614.98, 12 400, 12,"The Cobras"},
	
	--FBI
	{980, 2851.14, -329.67+1.1, (8.76+1.75),0,0,94, 2851.14, -329.67+1.1, (8.76+1.75)+4.5, 400,12,"Federal Bureau Of Investigations"},
	--{3115, 1922.95, 614.88, 14.04 , 1922.95, 614.88, 14.04 , 614.98, 12 400, 12,"The Cobras"},
	
	-- HolyCrap
	--{980,2617.92, 1172.65, 12.6,0,0,90,2617.92, 1172.65, 2.28,400,12,"HolyCrap"},
	--{980, 2127.1, 3109.51, 48, 0, 0, 180, 2126.52 , 3109.51, 10,400,12,"HolyCrap"},
	
        -- Sclutter
    --{980,997.66,1395.98,11.82,0,0,270,997.66,1395.98,6.82,400,12,"The Scuttlers"}, 
    --{980, 989.08,1223.55,12.52,0,0,180, 989.08,1223.55,6.82,400,12,"The Scuttlers"},	

	---------------------------------------------------------------------------------------------------------------
    ----------------------------------------------- SPECIAL STUFF ------------------------------------------------
	
	-- Staff Base
	{980, 256.25, 2957.5, 17.3, 0, 0, 180, 256.25, 2957.5, 0, 400, 12, "Staff"},
	{980, 256.25, 3257.2, 17.3, 0, 0, 180, 256.25, 3257.2, 0, 400, 12, "Staff"},
	
	
	---------------------------------------------------------------------------------------------------------------
    ----------------------------------------------- BUSINESSES ------------------------------------------------
	
	-- Money Dealers
    --{3113,  1285.73 , -1650 , 13.54 , 0, 15 , 0, 1285.73, -1650 , 0,400,12,"ALL"},
	
	
	
	

	
   -------------------------------------------------------------------------------------------------------------
   --------------------------------------------- EVERYONE-------------------------------------------------------

    --Dice

    {10150,1975.58, -3529.1, 4.64,0,0,90,1975.58, -3529.1, 0.33,5000,0.1,"NoGROUP",command="opendoor34",scale=1.1},
    {10150,1975.34, -3523.37, 4.64,0,0,90,1975.34, -3523.37, 0.33,5000,0.1,"NoGROUP",command="opendoor34",scale=1.1},
    {10150,2001.79, -3529.17, 4.64,0,0,90,2001.79, -3529.27, 0.33,5000,0.1,"NoGROUP",command="opendoor34",scale=1.1},
    {10150,2001.67, -3523.48, 4.64,0,0,90,2001.67, -3523.46, 0.33,5000,0.1,"NoGROUP",command="opendoor34",scale=1.1},
    {10150, 1991.58, -3513.31, 4.64,0,0,0, 1991.58, -3513.31, 0.33,5000,0.1,"NoGROUP",command="opendoor34",scale=1.1},
    {10150,1985.6, -3513.54, 4.64,0,0,0,1985.65, -3513.54, 0.33,5000,0.1,"NoGROUP",command="opendoor34",scale=1.1},
    {10150,1991.54, -3538.47, 4.64,0,0,-2,1991.54, -3538.47, 0.33,5000,0.1,"NoGROUP",command="opendoor34",scale=1.1},
    {10150,1985.65, -3538.9, 4.64,0,0,0,1985.65, -3538.9, 0.33,5000,0.1,"NoGROUP",command="opendoor34",scale=1.1},
	
	--nixtoll
	--{988,1708.900390625, 417, 29.700000762939,0,0,339.99938964844,1708.9000244141,417,25.60000038147,1000,6,"ALL"}, --Do NOT touch it (Nixon)
	--{988,1689.2998046875, 417.2001953125, 29.700000762939,0,0,161.4990234375,1689.3000488281,417.20001220703,25.5,1000,6,"ALL"}, --Do NOT touch it (Nixon)
	
	--sftoll
	--{980,-1131.11, 1096.8, 39.7,0,0,315,-1131.11, 1097.75, 8,1000,6,"ALL"},
	--{980,-1142.82, 1109.7, 40,0,0,317,-1142.82, 1108.66, 8,1000,6,"ALL"},
	
	---------------------------------------------------------------------------------------------------------------
    ----------------------------------------------- MAP BUGS ------------------------------------------------
	
	--Map bug
	{3113,681.85, -1580.74, 1.3,0,0,88.090911865234,0, 0, 0,0,0,"asdadadadsadasdasdasdasdasd.asdasdasdas"},

    --------------------------------------------------------------------

    -------------- CHANGE ONLY STUFF BETWEEN THIS AND ABOVE ------------

    --------------------------------------------------------------------

}



theGateID = {}

theGateElement = {}

moving = {}

open={}

for i=1,30 do moving[i]=false open[i]=false end

function isLaw(p)

    local name = getTeamName(getPlayerTeam(p))

    if name == "Government" or name == "GIGN" or name == "SWAT Team" or name == "Advanced Assault Forces" or name == "Staff" then return true end

    return false

end


function gateOpen ( hitElement, matchingDimension,col)

if (col) then source=col end

local theGate = theGateElement[source] -- source is col, in die table zitten cols gelinked aan hun gate object; als je terug ben upload dit en kijk of het werkt

    if (theGate) and (getElementType(hitElement) == "player") and (theGateID[theGate]) then

        local ID = theGateID[theGate]

        if open[ID]==true then return end

        --if moving[ID]==true then return end

        local x,y,z = getElementPosition ( theGate ) -- hoe kom je aan theGate? ik denk dat ie een andere opent. Ik denk dat dit werkt

        if ((getElementType(hitElement) == "player" and matchingDimension) or (col) ) then

            if (gatesTable[ID].mustBeInVeh) then if isPedInVehicle(hitElement) == false then return end end

            --if (col) then hitElement=col end

            if (getElementDimension(hitElement) == 0) then

                local x2, y2, z2 = getElementPosition(hitElement)

                if ((col) or ((z2 < gatesTable[ID][4] +5) and (z2 > gatesTable[ID][4] -5)) or (gatesTable[ID].gateColZ ~= nil and (z2 < gatesTable[ID].gateColZ +5) and (z2 > gatesTable[ID].gateColZ -5))) then

                    if getTeamName(getPlayerTeam(hitElement)) == "Staff" or ((col) or (exports.server:getPlayerGroupName(hitElement) and ((exports.server:getPlayerGroupName(hitElement) == gatesTable[ID][13] or ((gatesTable[ID].secondGroup) and exports.server:getPlayerGroupName(hitElement) == gatesTable[ID].secondGroup)) or  (getPlayerTeam(hitElement) or checkAllianceAccess(hitElement)) and getTeamName(getPlayerTeam(hitElement)) == "Staff" )) or (getPlayerTeam(hitElement) and getTeamName(getPlayerTeam(hitElement)) == gatesTable[ID][14] )) then
                        if gatesTable[ID][13] ~= nil and gatesTable[ID][13] == "LAW" then

                            if moving[ID]==true then return end

                        end

                        if gatesTable[ID][15] ~= nil then

                            moveObject( theGate, gatesTable[ID][11], gatesTable[ID][8], gatesTable[ID][9], gatesTable[ID][10],gatesTable[ID][15],gatesTable[ID][16],gatesTable[ID][17] )

                            moving[ID]=true

                            open[ID]=true

                            setTimer(function() moving[ID]=false end,gatesTable[ID][11]+500,1)

                        else
							if (gatesTable[ID][13] == getElementData(hitElement, "Group")) or (getPlayerTeam(hitElement) == getTeamFromName("Staff")) then
                            moving[ID]=true

                            open[ID]=true

                            setTimer(function() moving[ID]=false end,gatesTable[ID][11]+500,1)

                            moveObject( theGate, gatesTable[ID][11], gatesTable[ID][8], gatesTable[ID][9], gatesTable[ID][10] ) -- geen errors, geen move, niks, rest allemaal wel
							end
                        end

                    elseif gatesTable[ID][13] == "LAW" then

                        if moving[ID]==true then return end

                        if isLaw(hitElement) == true then

                            moving[ID]=true

                            open[ID]=true

                            setTimer(function() moving[ID]=false end,gatesTable[ID][11]+500,1)

                            moveObject( theGate, gatesTable[ID][11], gatesTable[ID][8], gatesTable[ID][9], gatesTable[ID][10],gatesTable[ID][15],gatesTable[ID][16],gatesTable[ID][17] )

                        end

                    elseif gatesTable[ID][13] == "ALL" then

                        if moving[ID]==true then return end

                        --if isLaw(hitElement) == true then

                            moving[ID]=true

                            open[ID]=true

                            setTimer(function() moving[ID]=false end,gatesTable[ID][11]+500,1)

                            moveObject( theGate, gatesTable[ID][11], gatesTable[ID][8], gatesTable[ID][9], gatesTable[ID][10],gatesTable[ID][15],gatesTable[ID][16],gatesTable[ID][17] )

                        --end
					elseif gatesTable[ID][13] == "HQ" then
						if moving[ID]==true then return end
						setElementData(hitElement,"hqGateMarker",theGate)
						triggerClientEvent(hitElement,"requestHQPassword",hitElement,ID)
                    end

                end

            end

        end

    end

end

addEvent("openHQGate",true)
addEventHandler("openHQGate",root,function(ID)
	local marker = getElementData(source,"hqGateMarker")
	if marker and isElement(marker) then
		if moving[ID] == false then
			outputDebugString("open HQ")
			moving[ID]=true
			open[ID]=true
			moveObject( marker, gatesTable[ID][11], gatesTable[ID][8], gatesTable[ID][9], gatesTable[ID][10],gatesTable[ID][15],gatesTable[ID][16],gatesTable[ID][17] )
			setTimer(function(myid,mr)
				stopObject(mr)
				moveObject( mr,gatesTable[myid][11], gatesTable[myid][2], gatesTable[myid][3], gatesTable[myid][4] )
				--setElementPosition(mr,-2486.02,-614.5,134)
				moving[myid]=false
				open[myid] = false
			end,5000,1,ID,marker)
		end
	end
end)



function gateClose (hitElement, matchingDimension, col )

if (col) then source=col end

local theGate = theGateElement[source]

    if (theGate) and (getElementType(hitElement) == "player") then

        local ID = theGateID[theGate]

        if open[ID]==false then return end

        --if moving[ID]==true then return end

        local x,y,z = getElementPosition ( theGate )

        if ((getElementType(hitElement) == "player" and matchingDimension) or (col) ) then

        if (gatesTable[ID].mustBeInVeh) then if isPedInVehicle(hitElement) == false then return end end

            if (col) then hitElement=col end

            local x2, y2, z2 = getElementPosition(hitElement)

            if ((z2 < gatesTable[ID][4] +5) and (z2 > gatesTable[ID][4] -5)) or (gatesTable[ID].gateColZ ~= nil and (z2 < gatesTable[ID].gateColZ +5) and (z2 > gatesTable[ID].gateColZ -5)) then

                if ((col) or (exports.server:getPlayerGroupName(hitElement) and ((exports.server:getPlayerGroupName(hitElement) == gatesTable[ID][13] or ((gatesTable[ID].secondGroup) and exports.server:getPlayerGroupName(hitElement) == gatesTable[ID].secondGroup)) or  (getPlayerTeam(hitElement) or checkAllianceAccess(hitElement)) and getTeamName(getPlayerTeam(hitElement)) == "Staff" )) or (getPlayerTeam(hitElement) and getTeamName(getPlayerTeam(hitElement)) == gatesTable[ID][14] )) then

                    if gatesTable[ID][13] ~= nil and gatesTable[ID][13] == "LAW" then

                            if moving[ID]==true then return end

                        end

                    if gatesTable[ID][15] ~= nil then

                        moving[ID]=true

                        open[ID]=false

                        setTimer(function() moving[ID]=false end,gatesTable[ID][11]+500,1)

                        moveObject( theGate, gatesTable[ID][11], gatesTable[ID][2], gatesTable[ID][3], gatesTable[ID][4], gatesTable[ID][18], gatesTable[ID][19], gatesTable[ID][20] )

                    else

                        moving[ID]=true

                        open[ID]=false

                        setTimer(function() moving[ID]=false end,gatesTable[ID][11]+500,1)

                        moveObject( theGate, gatesTable[ID][11], gatesTable[ID][2], gatesTable[ID][3], gatesTable[ID][4] )

                    end

                elseif gatesTable[ID][13] == "LAW" then

                    if moving[ID]==true then return end

                    if isLaw(hitElement) == true then

                        moving[ID]=true

                        open[ID]=false

                        setTimer(function() moving[ID]=false end,gatesTable[ID][11]+500,1)

                        moveObject( theGate, gatesTable[ID][11], gatesTable[ID][2], gatesTable[ID][3], gatesTable[ID][4], gatesTable[ID][18], gatesTable[ID][19], gatesTable[ID][20] )

                    end

                elseif gatesTable[ID][13] == "ALL" then

                    if moving[ID]==true then return end

                    --if isLaw(hitElement) == true then

                        moving[ID]=true

                        open[ID]=false

                        setTimer(function() moving[ID]=false end,gatesTable[ID][11]+500,1)

                        moveObject( theGate, gatesTable[ID][11], gatesTable[ID][2], gatesTable[ID][3], gatesTable[ID][4], gatesTable[ID][18], gatesTable[ID][19], gatesTable[ID][20] )

                    --end

                end

            end

        end

    end

end



--[[



function checkAllianceAccess(v)

    local a = getElementData(v,"alliance")

    if (a) then

        local t = exports.CSGgroups:alliances_getAllianceSettings(tonumber(a))

        if (t.shareGates) == true then

            return true

        else

            return false

        end

    end

end



]]

gateShaderTable={}

function newShaderGate(gate,v)

    local t = {}

    table.insert(t,{gate,v})

    table.insert(gateShaderTable,{gate,v})

    setTimer(function()

    for k,player in pairs(getElementsByType("player")) do

   --     triggerClientEvent(player,"recCustomGatesList",player,t)

    end

    end,5000,1)

end



addEventHandler("onPlayerLogin",root,function()

  --  triggerClientEvent(source,"recCustomGatesList",source,gateShaderTable)

end)



for ID, gates in ipairs(gatesTable) do

    local theGateCol = false

    if gates.gateColZ == nil then

        theGateCol=createColSphere ( gates[2], gates[3], gates[4], gates[12] )

    else

        theGateCol= createColSphere ( gates[2], gates[3], gates.gateColZ, gates[12] )



    end

    local theGate = createObject ( gates[1], gates[2], gates[3], gates[4], gates[5], gates[6], gates[7] )

    theGateElement[theGateCol] = theGate

    theGateID[theGate] = ID

    if gates.scale ~= nil then setObjectScale(theGate,gates.scale) end

    if gates.image ~= nil then

        newShaderGate(theGate,gates.image)

    end

    if gates.command ~= nil then

        addCommandHandler(gates.command,function(ps)



            local id = ID

            if open[ID] == true then

                --if gates.command == "togdice" then

                --  setTimer(function() gateClose(ps,true,theGateCol) end,math.random(2500),1)

                --else

                    gateClose(ps,true,theGateCol)

                --end



            else

                --if gates.command == "togdice" then

                --  setTimer(function() gateOpen(ps,true,theGateCol) end,math.random(2500),1)

                --else

                    gateOpen(ps,true,theGateCol)

                --end



            end

        end)

    end

    addEventHandler( "onColShapeHit", theGateCol, gateOpen )

    addEventHandler( "onColShapeLeave", theGateCol, gateClose )

end





--