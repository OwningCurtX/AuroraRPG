

stores = {
createBlip ( 1368.35, -1279.06, 12.55, 18, 2, 0, 0, 0, 0, 0, 270 ),
createBlip ( -2625.85, 208.345,3.98935, 18, 2, 0, 0, 0, 0, 0, 270 ),
createBlip ( 242.668, -178.478, 0.621441, 18, 2, 0, 0, 0, 0, 0, 270 ),
createBlip ( 2333.43, 61.5173, 25.7342, 18, 2, 0, 0, 0, 0, 0, 270 ),
createBlip ( 2159.51, 943.329, 9.82339, 18, 2, 0, 0, 0, 0, 0, 270 ),
createBlip ( 2539.04, 2083.56, 9.82222, 18, 2, 0, 0, 0, 0, 0, 270 ),
createBlip ( 777.231, 1871.47, 3.97687, 18, 2, 0, 0, 0, 0, 0, 270 ),
createBlip ( -315.676, 829.868, 13.4266, 18, 2, 0, 0, 0, 0, 0, 270 ),
createBlip ( -2093.51, -2464.79, 29.6404, 18, 2, 0, 0, 0, 0, 0, 270 ),
createBlip ( 2400.5, -1981.48, 12.5604, 18, 2, 0, 0, 0, 0, 0, 270 ),
createBlip ( -1508.95, 2608.75, 55.83, 18, 2, 0, 0, 0, 0, 0, 270 ),

-- End of Ammonation blibs

createBlip ( 2229.63, -1721.63, 12.6529, 54, 2, 0, 0, 0, 0, 0, 270 ),
createBlip ( -2270.46, -155.957, 34.3573, 54, 2, 0, 0, 0, 0, 0, 270 ),
createBlip ( 1968.7, 2295.3, 15.4955, 54, 2, 0, 0, 0, 0, 0, 270 ),

-- End of GYM blibs

createBlip ( 459.64, -1500.65, 31.04, 45, 2, 0, 0, 0, 0, 0, 270 ),
createBlip ( 1457.75, -1140, 24.06, 45, 2, 0, 0, 0, 0, 0, 270 ),
createBlip ( 2244.98, -1662.71, 15.46, 45, 2, 0, 0, 0, 0, 0, 270 ),
createBlip ( -1884.71, 864.23, 35.17, 45, 2, 0, 0, 0, 0, 0, 270 ),
createBlip ( -2494, -29.24, 25.76, 45, 2, 0, 0, 0, 0, 0, 270 ),
createBlip ( -2377.44,910.02, 45.44, 45, 2, 0, 0, 0, 0, 0, 270 ),
createBlip ( 2572.01, 1901.95, 11.02, 45, 2, 0, 0, 0, 0, 0, 270 ),
createBlip ( 2105.18, 2257.22, 11.02, 45, 2, 0, 0, 0, 0, 0, 270 ),
createBlip ( 1654.28, 1734.43, 10.82, 45, 2, 0, 0, 0, 0, 0, 270 ),
createBlip ( 2809.04, 2418.27, 10.82, 45, 2, 0, 0, 0, 0, 0, 270 ),

createBlip ( 500.5, -1358.53, 16.18, 45, 2, 0, 0, 0, 0, 0, 270 ),
createBlip ( -1696.14, 950.22, 24.89, 45, 2, 0, 0, 0, 0, 0, 270 ),
createBlip ( 2090.68, 2222.65, 10.82, 45, 2, 0, 0, 0, 0, 0, 270 ),
createBlip ( 2779.12, 2453.54, 11.06, 45, 2, 0, 0, 0, 0, 0, 270 ),

-- End of clothes store blips

createBlip ( 1834.41, -1681.88, 13.43, 49, 2, 0, 0, 0, 0, 0, 170 ),
createBlip (  3216.8, 1857.54, 14.17 , 49, 2, 0, 0, 0, 0, 0, 170 ),
-- End of Disco blips


}

function create()
	stores = {
		createBlip ( 1368.35, -1279.06, 12.55, 18, 2, 0, 0, 0, 0, 0, 270 ),
		createBlip ( -2625.85, 208.345,3.98935, 18, 2, 0, 0, 0, 0, 0, 270 ),
		createBlip ( 242.668, -178.478, 0.621441, 18, 2, 0, 0, 0, 0, 0, 270 ),
		createBlip ( 2333.43, 61.5173, 25.7342, 18, 2, 0, 0, 0, 0, 0, 270 ),
		createBlip ( 2159.51, 943.329, 9.82339, 18, 2, 0, 0, 0, 0, 0, 270 ),
		createBlip ( 2539.04, 2083.56, 9.82222, 18, 2, 0, 0, 0, 0, 0, 270 ),
		createBlip ( 777.231, 1871.47, 3.97687, 18, 2, 0, 0, 0, 0, 0, 270 ),
		createBlip ( -315.676, 829.868, 13.4266, 18, 2, 0, 0, 0, 0, 0, 270 ),
		createBlip ( -2093.51, -2464.79, 29.6404, 18, 2, 0, 0, 0, 0, 0, 270 ),
		createBlip ( 2400.5, -1981.48, 12.5604, 18, 2, 0, 0, 0, 0, 0, 270 ),
		createBlip ( -1508.95, 2608.75, 55.83, 18, 2, 0, 0, 0, 0, 0, 270 ),

		-- End of Ammonation blibs

		createBlip ( 2229.63, -1721.63, 12.6529, 54, 2, 0, 0, 0, 0, 0, 270 ),
		createBlip ( -2270.46, -155.957, 34.3573, 54, 2, 0, 0, 0, 0, 0, 270 ),
		createBlip ( 1968.7, 2295.3, 15.4955, 54, 2, 0, 0, 0, 0, 0, 270 ),

		-- End of GYM blibs

		createBlip ( 459.64, -1500.65, 31.04, 45, 2, 0, 0, 0, 0, 0, 270 ),
		createBlip ( 1457.75, -1140, 24.06, 45, 2, 0, 0, 0, 0, 0, 270 ),
		createBlip ( 2244.98, -1662.71, 15.46, 45, 2, 0, 0, 0, 0, 0, 270 ),
		--createBlip ( -1884.71, 864.23, 35.17, 45, 2, 0, 0, 0, 0, 0, 270 ),
		createBlip ( -2494, -29.24, 25.76, 45, 2, 0, 0, 0, 0, 0, 270 ),
		createBlip ( -2377.44, 910.02, 45.44, 45, 2, 0, 0, 0, 0, 0, 270 ),
		createBlip ( 2572.01, 1901.95, 11.02, 45, 2, 0, 0, 0, 0, 0, 270 ),
		createBlip ( 2105.18, 2257.22, 11.02, 45, 2, 0, 0, 0, 0, 0, 270 ),
		createBlip ( 1654.28, 1734.43, 10.82, 45, 2, 0, 0, 0, 0, 0, 270 ),
		createBlip ( 2809.04, 2418.27, 10.82, 45, 2, 0, 0, 0, 0, 0, 270 ),

		createBlip ( 500.5, -1358.53, 16.18, 45, 2, 0, 0, 0, 0, 0, 270 ),
		createBlip ( -1696.14, 950.22, 24.89, 45, 2, 0, 0, 0, 0, 0, 270 ),
		createBlip ( 2090.68, 2222.65, 10.82, 45, 2, 0, 0, 0, 0, 0, 270 ),
		createBlip ( 2779.12, 2453.54, 11.06, 45, 2, 0, 0, 0, 0, 0, 270 ),

		-- End of clothes store blips

		createBlip ( 1834.41, -1681.88, 13.43, 49, 2, 0, 0, 0, 0, 0, 170 ),
		-- End of Disco blips


		}
end

local blipswitch = function (blipstate)
	if blipstate then
	    for k,v in ipairs(stores) do
			if isElement(v) then destroyElement(v) end
		end
		create()
	else
    	for k,v in ipairs(stores) do
			if isElement(v) then destroyElement(v) end
		end
	end
end

addEvent( "onPlayerSettingChange", true )
addEventHandler( "onPlayerSettingChange", localPlayer,
	function ( setting, blipstate )
		if setting == "stores" then
			blipswitch( blipstate )
		end
	end
)

function checkSettingblip()
	if ( getResourceRootElement( getResourceFromName( "DENsettings" ) ) ) then
		local setting = exports.DENsettings:getPlayerSetting( "stores" )
		blipswitch( setting )
	else
		setTimer( checkSettingblip, 5000, 1 )
	end
end
addEventHandler( "onClientResourceStart", resourceRoot, checkSettingblip )
setTimer( checkSettingblip, 5000, 0 )
